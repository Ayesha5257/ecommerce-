import{g as d,s as y,U as C,p as P}from"./showToast-BYVryQkk.js";const S=o=>{let r=(d()||[]).find(u=>u.id===o),c=1,a=0;return r&&(c=r.quantity,a=r.price),{quantity:c,price:a}},f=(o,e,r,c)=>{const a=document.querySelector(`#card${e}`);if(!a){console.log(`Card with ID ${e} not found in DOM.`);return}const u=a.querySelector(".productQuantity"),i=a.querySelector(".productPrice");let t=1,n=c,l=d()||[],m=l.find(s=>s.id===e);m&&(t=m.quantity,n=m.price),o.target.className==="cartIncrement"&&(t<r?t+=1:t===r&&(t=r,n=c*r)),o.target.className==="cartDecrement"&&t>1&&(t-=1),n=parseFloat((c*t).toFixed(2));const p={id:e,quantity:t,price:n};l=l.map(s=>s.id===e?p:s),localStorage.setItem("cartProductLs",JSON.stringify(l)),u.innerText=t,i.innerText=n},q=o=>{let e=d();e=e.filter(c=>c.id!==o),localStorage.setItem("cartProductLs",JSON.stringify(e));let r=document.getElementById(`card${o}`);r&&(r.remove(),y("delete",o)),C(e)},g=()=>{let o=document.querySelector(".productSubTotal"),e=document.querySelector(".productFinalTotal"),a=d().reduce((u,i)=>{let t=parseInt(i.price)||0;return u+t},0);o.textContent=a,e.textContent=`Rs${a+50}`};let x=d(),T=P.filter(o=>x.some(e=>e.id===o.id));const E=document.querySelector("#productCartContainer"),F=document.querySelector("#productCartTemplate"),I=()=>{T.forEach(o=>{const{category:e,id:r,image:c,name:a,stock:u,price:i}=o;let t=document.importNode(F.content,!0);const n=S(r);t.querySelector(".cards").setAttribute("id",`card${r}`),t.querySelector(".productName").textContent=a,t.querySelector(".productImage").src=c,t.querySelector(".category").textContent=e,t.querySelector(".productQuantity").textContent=n.quantity,t.querySelector(".productPrice").textContent=n.price,t.querySelector(".stockElement"),addEventListener("click",l=>{f(l,r,u,i)}),t.querySelector(".remove-to-cart-button").addEventListener("click",()=>q(r)),E.appendChild(t)})};I();g();
