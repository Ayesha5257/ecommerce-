import{p as d,d as y,l as q,n as S}from"./showToast-DVgJNvX1--OjBGhMz.js";const g=c=>{let t=(d()||[]).find(n=>n.id===c),r=1,o=0;return t&&(r=t.quantity,o=t.price),{quantity:r,price:o}},f=(c,t,r,o)=>{const n=document.querySelector(`#card${t}`);if(!n){console.log(`Card with ID ${t} not found in DOM.`);return}const u=n.querySelector(".productQuantity"),m=n.querySelector(".productPrice");let e=1,a=o,i=d()||[],s=i.find(l=>l.id===t);s&&(e=s.quantity,a=s.price),c.target.className==="cartIncrement"&&(e<r?e+=1:e===r&&(e=r,a=o*r)),c.target.className==="cartDecrement"&&e>1&&(e-=1),a=parseFloat((o*e).toFixed(2));const p={id:t,quantity:e,price:a};i=i.map(l=>l.id===t?p:l),localStorage.setItem("cartProductLs",JSON.stringify(i)),u.innerText=e,m.innerText=a},C=c=>{let t=d();t=t.filter(o=>o.id!==c),localStorage.setItem("cartProductLs",JSON.stringify(t));let r=document.getElementById(`card${c}`);r&&(r.remove(),q("delete",c)),S(t)},x=()=>{let c=document.querySelector(".productSubTotal"),t=document.querySelector(".productFinalTotal"),r=d().reduce((o,n)=>{let u=parseInt(n.price)||0;return o+u},0);c.textContent=r,t.textContent=`Rs${r+50}`};let I=d(),E=y.filter(c=>I.some(t=>t.id===c.id));const N=document.querySelector("#productCartContainer"),T=document.querySelector("#productCartTemplate"),$=()=>{E.forEach(c=>{const{category:t,id:r,image:o,name:n,stock:u,price:m}=c;let e=document.importNode(T.content,!0);const a=g(r);e.querySelector(".cards").setAttribute("id",`card${r}`),e.querySelector(".productName").textContent=n,e.querySelector(".productImage").src=o,e.querySelector(".category").textContent=t,e.querySelector(".productQuantity").textContent=a.quantity,e.querySelector(".productPrice").textContent=a.price,e.querySelector(".stockElement"),addEventListener("click",i=>{f(i,r,u,m)}),e.querySelector(".remove-to-cart-button").addEventListener("click",()=>C(r)),N.appendChild(e)})};$();x();
